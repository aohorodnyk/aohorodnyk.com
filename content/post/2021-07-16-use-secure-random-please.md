---
title: "Use secure random number generators, please"
description: "Small suggestion that can safe any application"
author: "Anton Ohorodnyk"
date: "2021-07-16T21:16:29-07:00"
type: "post"
mermaid: false
draft: true
---
## Disclamer
This article not about theory of pseudo random algorithms, but basic article about practical representation of different generators in standard libraries of different languages. It is the reason we do not explore different pseudo random algorithms.

The article tries to help avoid the most common issues of developers.

If you have to use specific random algorigthm, certified algorithms or algorithm forced by your security team or developer's collegium (for example for gambling, or some security products), just use it.

## What is random
On one hand random is simple entity to understand. Random value - is value that cannot be predicted by someone.

On another hand conputer scince did not find a solution for the problem with name "random". All values we name as "random" were generated by pseudo-random algorithms. Actually all randomization algorithms have name pseudo-random, because of they do not generate really random values.

### True random number generators
"true random" is more or less real random number generators. These values can be generated by specific devices. These devices use a number of techniques for generating entropy, such as atmospheric noise, reverse bias semiconductors and beam splitting (for example - [Recommendation for the Entropy Sources Used for Random Bit Generation](https://doi.org/10.6028/NIST.SP.800-90B)).

There is at least one service with APIs that can be used to generate "true random" values:
* [random.org](https://api.random.org/pricing)

## Pseudo random number generators
In all languages I've seed before presented at least two different types of random number generators:
* [Pseudo random number generator (also mathematical in some languages)](https://en.wikipedia.org/wiki/Pseudorandom_number_generator). Known as PRNG
* [Cryptographically secure random number generator](https://en.wikipedia.org/wiki/Cryptographically-secure_pseudorandom_number_generator). Known as CSPRNG

### Pseudo random number generator (PRNG)
This is a predicteble number generator with ability to specify custom "seed".

Seed is a value that uses as a starting value for next random values mathematically calculated from previously gemerated value.

It means that everyone who knows used seed can generate the same infinite sequence of numbers.

#### When to use:
* We need to have predictable random values and we save seeds between generated values
* We write performance sensitive application and we do not use random function for sensitive data

#### When not to use:
* Use this function NEVER, until you are sure you HAVE TO use it in your particular case

#### Small suggestion
If you decided to use this kind of random and you want or need to specify your custom seed. Use, please, something less predictable then current timestamp in seconds.

Posible ideas (higher is better in my opinion):
1. If you can use some secure random algorithm use decided to use a faster solution, then generate seed once by secure random and use the selected algorithm after that
1. If you cannot use secure random at all, then use different the mose unique values from your node, like: PID of app, timestamp in nanoseconds, ip address, mac address, etc. Combine as many unique values as you can
1. Use, at least, unix timestamp in nanoseconds with PID

### Cryptographically secure random number generator (CSPRNG)
This is also pseudo random number generators and also mathematical, but it uses more complicated rules and algorithms to make it difficult to predict random values.

These algorithms are usually suggested to use for "real" sensitive generated values. I'm not a security expert to contradict this statement, but I have a reason to add more rules when to use secure random.

Usually software engineers are not so familiar with security (I'm as well) as we think we are. When developers write some feature, they are can think especial random number will not affect security, but it will in future.

#### When not to use:
* Use a basic CSPRNG provided by a programming language whenever you need random bytes and you did not decide to use the faster one.
* Investigate more secure implementation in a language or external libraries, if you need certified crypto-secure generator

#### When not to use:
From my perspective there are only two reasons to stop use this solution:
* Performance issues that requires to switch to something faster
* Platform limitations where no way to use this kind of generators

## Summary
Until developers are sure what they are doing (even better to get an approval from security team for particular use case), I'd suggest to use CSPRNG from a language.

In libraries good way would be to provide options between different random functions and specify crypto-random generator by default.
